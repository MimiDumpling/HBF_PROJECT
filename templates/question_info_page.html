{% extends 'base.html' %}
{% block body %}

<a href="/questions">Questions</a>

<div>
<h1>{{ question.title }}</h1>

<div>

    <div>
        <span id="question_id" data-question-id="{{ question.question_id }}"></span>

        <p>Submitted by: {{ question.user.user_name }}</p>
        <p>Date/Time Submitted: {{ question.created_at | pacific }}</p>

          <p class="question-vote-count">0</p>
          <button
                  id="question-vote"
                  class="question-vote-btn" 
                  data-default-text="Vote This Question Up!"
                  data-alt-text="Thanks for Voting">
            <span class="icon"></span> <span class="text">Vote This Question Up!</span>
          </button>

    {% if question.answers %}
      <ul>
        {% for answer in question.answers %}
          <li>
            <span id="answer_id" data-answer-id="{{ answer.answer_id }}"></span>

            <p>Answered By: {{answer.user.user_name}}</p>
            <p>Answered Date/Time: {{ (answer.created_at | pacific) }}</p>

            {% if answer.edited_at %}
              <p>Edited Date/Time: {{ answer.edited_at | pacific }}</p>
            {% else %}
              <p>Edited Date/Time: This answer has not been edited.</p>
            {% endif %}

            <p>Answer: {{ answer.body }}</p>

              <p class="answer-vote-count">0</p>
              <button
                      id="answer-vote"
                      class="answer-vote-btn" 
                      data-default-text="Vote This Answer Up!"
                      data-alt-text="Thanks for Voting">
                <span class="icon"></span> <span class="text">Vote This Answer Up!</span>
              </button>

          </li>
        {% endfor %}

    {% else %}
      <p>There are no answers for this question.</p>
    {% endif %}        
      </ul>        

      {% if answer %}
        <form action="/questions/{{ question.question_id }}" method="POST">
          Do you want to edit your answer?<br>
          <textarea rows="8" cols="100" name="updated_answer">{{ answer.body }}</textarea><br>
          <input type="submit" value="Edit">
        </form>
      {% else %}
        <p>Would you like to answer this question?</p>
        <form action="/questions/{{ question.question_id }}" method="POST">
          Submit An Answer:<br>
          <textarea rows="8" cols="100" name="user_answer"></textarea><br>
          <input type="submit" value="Submit">
        </form><br>
      {% endif %} 

    </div>
</div>
</div>
{% endblock %}

